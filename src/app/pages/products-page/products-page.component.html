<div class="page">
  <h1>Welcome, {{username}}</h1>
  <div class="wrapper">
    <div class="table-wrapper">
      <table mat-table [dataSource]="productsToShow">
        <ng-container matColumnDef="name">
          <th mat-header-cell *matHeaderCellDef> Name </th>
          <td mat-cell *matCellDef="let element">{{element.name}}</td>
        </ng-container>
        <ng-container matColumnDef="data">
          <th mat-header-cell *matHeaderCellDef> Data </th>
          <td mat-cell *matCellDef="let element">
            <ul *ngIf="element.data">
              <li *ngFor="let key of Object.keys(element.data)">
                {{ key }}: {{ element.data[key]}}
              </li>
            </ul>
          </td>
        </ng-container>
        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>
    </div>
    <mat-progress-bar *ngIf="isLoading" mode="indeterminate"></mat-progress-bar>
    <mat-paginator [length]="products.length || 0"
                 [pageSize]="pageSize"
                 [pageSizeOptions]="pageSizeOptions"
                 (page)="onPageChange($event)"
                 aria-label="Select page"
                   class="paginator">
  </mat-paginator>
  </div>
  <button class="new-product-button" routerLink="/main/new-product">New Product</button>
</div>
